<!-- 
/**
 * PpitCore V1.0 (https://github.com/p-pit/PpitCore)
 *
 * @link      https://github.com/p-pit/PpitCore
 * @copyright Copyright (c) 2016 Bruno Lartillot
 * @license   https://github.com/p-pit/PpitCore/blob/master/license.txt GNU-GPL license
 */
-->

<?php if ($context->hasRole('admin') && $event->id) : ?>

<!-- Display the audit -->

<div class="card mt-2">
  <div class="card-body">
      <div class="card-title text-muted"><?php echo $this->translate('History', 'ppit-core', $context->getLocale()) ?> (<a id="audit-label"><?php echo $this->translate('Show', 'ppit-core', $context->getLocale()) ?></a>)</div>
      <div id="audit-panel" class="panel panel-default">
        <div class="panel-body">
  <?php foreach ($event->audit as $auditEvent) : ?>
          <div class="row">
            <div class="col-md-12">
              <strong><?php echo $context->decodeDate(substr($auditEvent['time'], 0, 10)).substr($auditEvent['time'], 10) ?>:</strong>&nbsp;
              (<?php echo $auditEvent['n_fn'] ?>)
            </div>
          </div>
    <?php foreach ($auditEvent as $propertyId => $property) : ?>
      <?php if ($propertyId != 'time' && $propertyId != 'n_fn') : ?>
          <div class="row">
            <div class="col-md-2" align="right">&nbsp;</div>
            <div class="col-md-10"><em><?php echo $propertyId.': '.$property ?></em></div>
          </div>
      <?php endif;?>
    <?php endforeach;?>
  <?php endforeach;?>
        </div>
      </div>
  </div>
</div>
      <div>&nbsp;</div>
<?php endif;?>

      <div id="event-update-panel"></div>
