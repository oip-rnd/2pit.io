<!-- 
/**
 * PpitCore V1.0 (https://github.com/p-pit/PpitCore)
 *
 * @link      https://github.com/p-pit/PpitCore
 * @copyright Copyright (c) 2016 Bruno Lartillot
 * @license   https://github.com/p-pit/PpitCore/blob/master/license.txt GNU-GPL license
 */
-->

<?php
$this->headTitle($title);
echo $this->partial('/partials/header') 
?>
<div>&nbsp;</div>
<div class="row">
    <div class="col-md-6 col-md-offset-3">

		<div class="panel panel-default">
            <div class="panel-heading" style="background: <?php echo $context->getConfig('styleSheet')['panelHeadingBackground'] ?>; color: <?php echo $context->getConfig('styleSheet')['panelHeadingColor'] ?>">
				<strong><?php echo $this->translate('Change the password', 'ppit-core', 'fr_FR');?></strong>
            </div>
           	<div class="panel-body">

<!-- Form header -->
<?php echo $this->partial('/partials/form-header') ?>

<?php if ($error == 'Integrity') : ?>
				<div id="message">
						<div class="alert alert-danger"><h4><?php echo $this->translate('Both new passwords should be identical', 'ppit-core', $context->getLocale()) ?></h4></div>
				</div>
<?php endif;?>

<?php if ($message == 'OK') $isDisabled = true; else $isDisabled = false; ?>

<!-- Authentication error -->
<?php if ($error == 'Authentication') : ?>
				<div id="message">
						<div class="alert alert-danger"><h4><?php echo $this->translate('Authentication failed', 'ppit-core', $context->getLocale()) ?></h4></div>
				</div>
<?php endif;?>
					
<!-- Current password -->
				<div class="form-group" id="current_password_group">
					<label class="col-sm-5 control-label">* <?php echo $this->translate('Current password', 'ppit-core', $context->getLocale()) ?></label>
					<div class="col-sm-7">
						<input type="password" name="current_password" id="current_password" class="form-control" <?php if (isset($isDisabled) && $isDisabled) echo 'disabled ="disabled"' ?>>
					</div>
					<div class="col-sm-12"><p class="help-block" id="current_password_error"></p></div>
				</div>
					
<!-- Password -->
				<div class="form-group" id="new_password_group">
					<label class="col-sm-5 control-label">* <?php echo $this->translate('New password', 'ppit-core', $context->getLocale()) ?></label>
					<div class="col-sm-7">
						<input type="password" name="new_password" id="new_password" class="form-control" <?php if (isset($isDisabled) && $isDisabled) echo 'disabled ="disabled"' ?>>
					</div>
					<div class="col-sm-12"><p class="help-block" id="new_password_error"></p></div>
				</div>

<!-- Password (2nd) -->
				<div class="form-group" id="new_password2_group">
					<label class="col-sm-5 control-label">* <?php echo $this->translate('New password', 'ppit-core', $context->getLocale()) ?> (2)</label>
					<div class="col-sm-7">
						<input type="password" name="new_password2" id="new_password2" class="form-control" <?php if (isset($isDisabled) && $isDisabled) echo 'disabled ="disabled"' ?>>
					</div>
					<div class="col-sm-12"><p class="help-block" id="new_password2_error"></p></div>
				</div>

<!-- Form footer -->

					<div class="form-group">
						<div class="col-sm-5">&nbsp;</div>
						<div class="col-sm-7">
							<input name="submit" type="submit" id="submit-button" class="btn btn-warning" value="<?php echo $this->translate('Confirm', 'ppit-core', $context->getLocale()) ?>">
							&nbsp;&nbsp;
							<button type="button" class="btn btn-default"  id="cancel-anchor" >
								<span>Annuler</span>
								<span class="glyphicon" id="cancel-anchor-glyphicon"></span>
							</button>
						</div>
		   			</div>
	   			</form>
		   	</div>
		</div>
	</div>
</div>
