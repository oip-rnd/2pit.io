<h4 style="text-align: center"><strong><?php echo $this->translate('User account', 'ppit-core', $context->getLocale()) ?></strong></h4>

<!-- Form header -->
<?php echo $this->partial('/partials/form-header', array(
		'update_time' => $account->update_time,
		'message' => $message,
		'error' => $error,
		'csrfForm' => $csrfForm,
		'context' => $context,
));
?>

<?php if ($message != 'OK') : ?>
	    <div class="form-group row">
			<div class="col-sm-5">&nbsp;</div>
			<div class="col-sm-7">
				<input name="submit" type="submit" id="up-submit-button" class="btn btn-warning" value="<?php echo $this->translate('Update', 'ppit-core', $context->getLocale()) ?>">
			</div>
		</div>
<?php endif;?>
<?php 
if ($message == 'OK') $isDisabled = true; else $isDisabled = false;
?>

<!-- Connexion identifier -->		
		<div class="form-group row" id="username_group">
			<label class="col-sm-5 col-form-label col-form-label-sm"><?php echo $this->translate('Identifier', 'ppit-core', $context->getLocale()) ?></label>
			<div class="col-sm-7">
				<input class="form-control form-control-sm" id="username" value="<?php echo $account->username ?>" <?php if ($account->user->user_id || $isDisabled) echo 'disabled="disabled"'?> />
                <div class="invalid-feedback" id="username_error"><?php if ($error == 'Duplicate user') echo $this->translate('This identifier has already been chosen, please select another one', 'ppit-core', $context->getLocale()) ?></div>
			</div>
		</div>

<!-- Re-active ? -->
		<div class="form-group row" id="state_group">
			<label class="col-sm-5 col-form-label col-form-label-sm"><?php echo $this->translate('Revoke or reactivate', 'ppit-core', $context->getLocale()) ?></label>
			<div class="col-sm-7">
				<input type="checkbox" id="state" class="form-control form-control-sm" value="1"<?php if ($account->user->state) echo ' checked="checked"' ?><?php if (isset($isDisabled) && $isDisabled) echo ' disabled ="disabled"' ?>>
			</div>
		</div>

<!-- Accept notifications ? -->
		<div class="form-group row" id="is_notified_group">
			<label class="col-sm-5 col-form-label col-form-label-sm"><?php echo $this->translate('Accept notifications ?', 'ppit-core', $context->getLocale()) ?></label>
			<div class="col-sm-7">
				<input type="checkbox" id="is_notified" class="form-control form-control-sm" value="1"<?php if ($account->user->requires_notifications) echo ' checked="checked"' ?><?php if (isset($isDisabled) && $isDisabled) echo ' disabled ="disabled"' ?>>
			</div>
		</div>
		
<!-- Locale -->
		<div class="form-group row" id="locale_group">
			<label class="col-sm-5 col-form-label col-form-label-sm"><?php echo $this->translate('Locale', 'ppit-core', $context->getLocale()) ?></label>
			<div class="col-sm-7">
				<select id="locale" class="form-control form-control-sm"<?php if (isset($isDisabled) && $isDisabled) echo ' disabled ="disabled"' ?>>
					<option value="fr_FR" <?php if ($account->locale == 'fr_FR') echo 'selected="selected"'; ?>>fr_FR</option>
					<option value="en_US" <?php if ($account->locale == 'en_US') echo 'selected="selected"'; ?>>en_US</option>
				</select>
                <div class="invalid-feedback" id="locale_error"></div>
			</div>
		</div>

<!-- Password -->
    <div class="form-group row" id="new_password_group">
      <label class="col-sm-5 col-form-label col-form-label-sm"><?php echo $this->translate('New password', 'ppit-core', $context->getLocale()) ?></label>
      <div class="col-sm-7">
        <input /*type="password"*/ id="new_password" class="form-control form-control-sm" value="<?php echo $new_password ?>" <?php if ($isDisabled) echo 'disabled ="disabled"' ?>>
                <div class="invalid-feedback" id="new_password_error"></div>
      </div>
    </div>

<!-- Password (2nd) -->
    <div class="form-group row" id="new_password2_group">
      <label class="col-sm-5 col-form-label col-form-label-sm"><?php echo $this->translate('New password', 'ppit-core', $context->getLocale()) ?> (2)</label>
      <div class="col-sm-7">
        <input /*type="password"*/ id="new_password2" class="form-control form-control-sm" value="<?php echo $new_password ?>" <?php if ($isDisabled) echo 'disabled ="disabled"' ?>>
                <div class="invalid-feedback" id="new_password2_error"></div>
      </div>
    </div>

<!-- Send init password -->
    <div class="form-group row" id="password_email_group">
      <label class="col-sm-5 col-form-label col-form-label-sm"><?php echo $this->translate('OR Send a new password email', 'ppit-core', $context->getLocale()) ?></label>
      <div class="col-sm-7">
        <input type="checkbox" id="password_email" class="form-control form-control-sm" value="1"<?php if ($password_email) echo ' checked="checked"' ?><?php if (isset($isDisabled) && $isDisabled) echo ' disabled ="disabled"' ?>>
      </div>
    </div>

<?php if ($message != 'OK') : ?>
		    <div class="form-group row">
				<div class="col-sm-5">&nbsp;</div>
				<div class="col-sm-7">
					<input name="submit" type="submit" id="submit-button" class="btn btn-warning" value="<?php echo $this->translate('Update', 'ppit-core', $context->getLocale()) ?>">
				</div>
			</div>
<?php endif;?>		
		</form>
